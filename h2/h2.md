# h2 Lempiväri: violetti
Kotitehtävä h2 Lempiväri: violetti Tero Karvisen Verkkoon tunkeutuminen ja tiedustelu - 2025 syksy kurssille. [Linkki kurssisivulle](https://terokarvinen.com/verkkoon-tunkeutuminen-ja-tiedustelu/)
Jokaisessa kohdassa on alla olevalla "quote" tyylillä kerrottu tehtävänanto.
>Liirum laarum laa...
## Tehtävät

### a
> Apache log. Asenna Apache-weppipalvelin paikalliselle virtuaalikoneellesi. Surffaa palvelimellesi salaamattomalla HTTP-yhteydellä, http://localhost . Etsi omaa sivulataustasi vastaava lokirivi. Analysoi yksi tällainen lokirivi, eli selitä sen kaikki kohdat. (Jos Apache ei ole kovin tuttu, voit tätä tehtävää varten vain asentaa sen ja testata oletusweppisivulla. Eli ei tarvitse tehdä omia kotisvuja tms.)

Käynnistin apachen komennolla `sudo /etc/init.d/apache2 start`. Avasin Firefoxissa apachen default sivun `http://localhost`. 

![alt text](image.png)

Lähdin tutkimaan apachen acces logeja `cat /var/log/apache2/acces.log`. Sieltä löytyi nettiselaukseni logit

![alt text](image-1.png)

    127.0.0.1 - - [01/Nov/2025:22:16:02 +0100] "GET / HTTP/1.1" 200 3383 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0"
    127.0.0.1 - - [01/Nov/2025:22:16:02 +0100] "GET /icons/openlogo-75.png HTTP/1.1" 200 6040 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0"
    127.0.0.1 - - [01/Nov/2025:22:16:02 +0100] "GET /favicon.ico HTTP/1.1" 404 487 "http://localhost/" "Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0"

Lähdin analysoimaan ensimmäistä lokiriviä. Käytin tässä apuna Apachen dokumentaatiota (https://httpd.apache.org/docs/2.4/logs.html#accesslog). `127.0.0.1` kertoo kyseisen lokin käyttäjän IP-osoitteen. Tässä tapauksessa se on local ip. Tämän jälkeen lokissa näkyy aika, jolloin pyyntö on saapunut serverille. `GET / HTTP/1.1` on GET pyyntö, missä näkyy mitä käyttäjä pyysi palvelimelta sekä protokolla millä käyttäjä teki pyynnön. Tämä näkyy paremmin muissa logeissa, esim toisen rivin logissa tämä on `GET /icons/openlogo-75.png HTTP/1.1`. `200 3383` kertoo status coden "200", eli OK. `3383` kertoo datan suuruuden bitteina, mitä palvelin palautti käyttäjälle. Seuraava `-` kertoisi, mistä käyttäjä kertoo olleensa "referoitu". Tämä näkyy paremmin toisen rivin logissa `http://localhost/`. Viimeinen rimpsu `Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0` kertoo käyttäjän User-Agentin. Esimerkiksi tästä voimme analysoida, että käyttäjä joka vieraili palvelimella käyttää Firefoxia Linuxilla.

### b
> Nmapped. Porttiskannaa oma weppipalvelimesi käyttäen localhost-osoitetta ja 'nmap -A' päällä. Selitä tulokset. (Pelkkä http-portti 80/tcp riittää)

Aluksi testasin, että verkkoni poissa. Tällä ei ole sinänsä väliä, sillä IP-osoitteena on `localhost` ja typon aiheuttama tuho tässä olisi mitätön. Sueraavaksi skannasin oman virtuaalikoneeni portin 80, missä apache pyörii. Skannauksen tein sudona, sekä -A parametrilla.

    ping 8.8.8.8
    sudo nmap -A -p 80 localhost

![alt text](image-2.png)

Tässä alhaalla vielä tekstinä itse tärkein osuus

    PORT   STATE SERVICE VERSION
    80/tcp open  http    Apache httpd 2.4.65 ((Debian))
    |_http-title: Apache2 Debian Default Page: It works
    |_http-server-header: Apache/2.4.65 (Debian)
    Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port
    Device type: general purpose
    Running: Linux 2.6.X|5.X
    OS CPE: cpe:/o:linux:linux_kernel:2.6.32 cpe:/o:linux:linux_kernel:5 cpe:/o:linux:linux_kernel:6
    OS details: Linux 2.6.32, Linux 5.0 - 6.2
    Network Distance: 0 hops


# Lähteet
Apache logs documentation https://httpd.apache.org/docs/2.4/logs.html#accesslog